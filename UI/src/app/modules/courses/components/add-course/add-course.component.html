<section class="course">
  <div class="container">
    <form [formGroup]="addCourseForm" (ngSubmit)="onSave()" class="course-form" >
      <h2 class="form-header">{{isEditCourse ? 'Edit' : 'Add new'}} course</h2>
      <app-reactive-text-input
        class="form-input long"
        [formControl]="titleControl"
        type="text"
        placeholder="Enter title"
        [long]="true"
        [invalid]="titleControl.invalid"
        hintText="Max title length 50 symbols"
        labelText="Title*"
      ></app-reactive-text-input>
      <app-reactive-text-input
        [formControl]="descriptionControl"
        class="form-input long"
        type="textarea"
        placeholder="Enter description"
        [invalid]="descriptionControl.invalid"
        [long]="true"
        labelText="Description*"
        hintText="Max description length 500 symbols"
      ></app-reactive-text-input>
      <app-reactive-text-input
        class="form-input long"
        [formControl]="dateControl"
        type="text"
        placeholder="Enter date"
        [invalid]="dateControl.invalid"
        hintText="Date format should be dd.mm.yyyy"
        labelText="Date*"
      ></app-reactive-text-input>
      <app-reactive-text-input
        class="form-input long"
        [formControl]="durationControl"
        type="text"
        [invalid]="durationControl.invalid"
        placeholder="Enter duration"
        labelText="Duration*"
        hintText="Duration should be a number of minutes (3 digits max)"
      ></app-reactive-text-input>

      <h3 class="authors-header">
        Authors* (to edit author click on the rectangle with name):
        <span class="author-hint">min 1 author necessary</span>
      </h3>
      <div class="authors-container">
        <div
          *ngFor="let author of authorsControl.value; index as i"
          class="author-wrapper"
          title="Click to open editor form"
          (click)="toggleEdit(i)"
        >
          {{author.name}} {{author.lastName}}
          <app-button
            text="X"
            type="button"
            (btnClick)="removeAuthor(i)"
          ></app-button>
        </div>
        <app-button
          class="author-add-button"
          text="Add author"
          type="button"
          [colored]="true"
          (btnClick)="addAuthor()"
        ></app-button>
      </div>

      <div>
        <div *ngFor="let author of authorsControl.controls; index as i">
          <app-authors-list
            [authorsGroup]="author"
            [numOfAuthor]="i + 1"
            [isOpen]="i === authorToEdit"
          ></app-authors-list>
        </div>
      </div>

      <p class="note"><strong>*</strong> - required inputs</p>
      <div class="form-control">
        <app-button
          class="margin-btn"
          text="Save"
          type="submit"
          [colored]="true"
          [disabled]="!addCourseForm.valid"
        ></app-button>
        <app-button
          (btnClick)="onCancel()"
          text="Cancel"
          type="button"
        ></app-button>
      </div>
    </form>
  </div>
</section>
